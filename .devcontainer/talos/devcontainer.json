{
  "name": "talos",
  "image": "ghcr.io/nifr/talos:latest-build-2025-09-06T22.01.00Z",
  "overrideCommand": false,
  "runArgs": [
    "--hostname=talos",
    "--privileged"
  ],
  "features": {
    "ghcr.io/devcontainers/features/git:1": {
      "version": "latest"
    },
    "./features/talosctl": {
      "version": "1.11.0"
    }
  },
  "mounts": [
    {
      "type": "bind",
      "source": "${localWorkspaceFolder}/.devcontainer/.secrets/GH_TOKEN",
      "target": "/run/secrets/GH_TOKEN"
    },
      {
      "type": "bind",
      "source": "${localWorkspaceFolder}/.devcontainer/.secrets/HCLOUD_TOKEN",
      "target": "/run/secrets/HCLOUD_TOKEN"
    },
    {
      "type": "bind",
      "source": "${localWorkspaceFolder}/.devcontainer/.secrets/PULUMI_ACCESS_TOKEN",
      "target": "/run/secrets/PULUMI_ACCESS_TOKEN"
    },
    {
      "type": "bind",
      "source": "${localWorkspaceFolder}/.devcontainer/.secrets/ssh_public_key",
      "target": "/run/secrets/ssh_public_key"
    }
  ],
  "secrets": {
    "GH_TOKEN": {
      "description": "(required) Personal Access Token (PAT), used by GitHub CLI \"gh\"",
      "documentationUrl": "https://github.com/settings/tokens"
    },
    "HCLOUD_TOKEN": {
      "description": "(required) Hetzner Cloud API token, used by \"hcloud\" and Pulumi",
      "documentationUrl": "https://console.hetzner.com/projects/<project_id>/security/tokens"
    },
    "PULUMI_ACCESS_TOKEN": {
      "description": "(required) Pulumi Cloud Access Token, used by Pulumi",
      "documentationUrl": "https://app.pulumi.com/user/settings/tokens"
    }
  },
  "hostRequirements": {
		"cpus": 4,
		"memory": "15gb",
		"storage": "32gb",
		"gpu": "optional"
	},
  "customizations": {
    "codespaces": {
      "repositories": {
        "nifr/*": {
          "permissions": {
            "contents": "write",
            "workflows": "write",
            "packages": "read",
            "actions": "write"
          }
        }
      }
    }
  }
}